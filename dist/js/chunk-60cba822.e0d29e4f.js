(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60cba822"],{"0b5e":function(s,t,e){},"25f0":function(s,t,e){"use strict";var a=e("6eeb"),i=e("825a"),r=e("d039"),o=e("ad6d"),c="toString",n=RegExp.prototype,l=n[c],d=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=l.name!=c;(d||p)&&a(RegExp.prototype,c,(function(){var s=i(this),t=String(s.source),e=s.flags,a=String(void 0===e&&s instanceof RegExp&&!("flags"in n)?o.call(s):e);return"/"+t+"/"+a}),{unsafe:!0})},5530:function(s,t,e){"use strict";e.d(t,"a",(function(){return r}));e("b64b"),e("a4d3"),e("4de4"),e("e439"),e("159b"),e("dbb4");var a=e("ade3");function i(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),e.push.apply(e,a)}return e}function r(s){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){Object(a["a"])(s,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))}))}return s}},"5ec2":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"proposalDetail"},[a("dao-nav"),a("div",{staticClass:"detail-content"},[a("div",{staticClass:"rainbow-panel part1"},[a("div",{staticClass:"left"},[a("div",{staticClass:"content"},[s._v(" "+s._s(s.proposal.title)+" ")]),a("div",{staticClass:"status-box"},[a("div",{staticClass:"status"},[s._v(" "+s._s(s.proposal.state)+" ")]),a("div",{staticClass:"date"},[s._v(" active block:"+s._s(parseInt(s.proposal.endBlock.toString().replace(",",""))-parseInt(s.proposal.publicityDelay.toString().replace(",","")))+" ~"+s._s(s.proposal.endBlock)+" ")])])]),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[s._v(" My votes ")]),a("div",{staticClass:"number"},[s._v(" "+s._s(s.myVotes)+" ")]),a("div",{staticClass:"btn-box"},[a("div",{staticClass:"support",on:{click:s.delegate}},[s._v(" delegate ")]),a("div",{staticClass:"support",on:{click:function(t){return s.castVote(!0)}}},[s._v(" Support ")]),a("div",{staticClass:"Refuse",on:{click:function(t){return s.castVote(!1)}}},[s._v(" Refuse ")])])])]),a("div",{staticClass:"part2"},[a("div",{staticClass:"rainbow-panel left-part"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"title"},[s._v(" Support ")]),a("div",{staticClass:"address"},[s._v(" "+s._s(s.proposal.supportArr.length)+" Address ")])]),a("div",{staticClass:"vote-number"},[a("div",{staticClass:"number"},[s._v(" "+s._s(s.proposal.forVotes)+" ")]),s._m(0)]),a("div",{staticClass:"members"},s._l(s.proposal.supportArr,(function(t,e){return a("div",{key:e,staticClass:"member-item"},[s._m(1,!0),a("div",{staticClass:"name"},[s._v(" "+s._s(t.address)+" ")]),a("div",{staticClass:"number"},[s._v(" "+s._s(t.votes)+" ")])])})),0),a("div",{staticClass:"more-btn",on:{click:function(t){s.isShowMembers=!0}}},[s._v(" MORE ")])]),a("div",{staticClass:"right"},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"title"},[s._v(" Refuse ")]),a("div",{staticClass:"address"},[s._v(" "+s._s(s.proposal.refuseArr.length)+" Address ")])]),a("div",{staticClass:"vote-number"},[a("div",{staticClass:"number"},[s._v(" "+s._s(s.proposal.againstVotes)+" ")]),s._m(2)]),a("div",{staticClass:"members"},s._l(s.proposal.refuseArr,(function(t,e){return a("div",{key:e,staticClass:"member-item"},[s._m(3,!0),a("div",{staticClass:"name"},[s._v(" "+s._s(t.address)+" ")]),a("div",{staticClass:"number"},[s._v(" "+s._s(t.votes)+" ")])])})),0),a("div",{staticClass:"more-btn",on:{click:function(t){s.isShowMembers=!0}}},[s._v(" MORE ")])])]),a("div",{staticClass:"rainbow-panel right-part"},[a("div",{staticClass:"title"},[s._v(" Timeline ")]),a("div",{staticClass:"step-box"},[a("div",{staticClass:"step"},[a("div",{staticClass:"icon",class:{active:s.statusIndex>0}},[a("img",{attrs:{src:e("9f6a0"),alt:""}})]),a("div",{staticClass:"name"},[s._v(" Establish ")]),a("div",{staticClass:"date"},[s._v(" "+s._s(s.proposal.startBlock)+" block ")])]),a("div",{staticClass:"step"},[a("div",{staticClass:"icon",class:{active:s.statusIndex>1}},[a("img",{attrs:{src:e("9f6a0"),alt:""}})]),a("div",{staticClass:"name"},[s._v(" Voting period ")]),a("div",{staticClass:"date"},[s._v(" "+s._s(s.proposal.endBlock)+"block ")])]),a("div",{staticClass:"step"},[a("div",{staticClass:"icon",class:{active:s.statusIndex>2}},[a("img",{attrs:{src:e("9f6a0"),alt:""}})]),a("div",{staticClass:"name"},[s._v(" Publicity period ")]),a("div",{staticClass:"date"})]),a("div",{staticClass:"step"},[a("div",{staticClass:"icon",class:{active:s.statusIndex>3}},[a("img",{attrs:{src:e("9f6a0"),alt:""}})]),a("div",{staticClass:"name"},[s._v(" Publicity period ")]),a("div",{staticClass:"date"})]),a("div",{staticClass:"step"},[a("div",{staticClass:"icon",class:{active:s.statusIndex>4}},[a("img",{attrs:{src:e("9f6a0"),alt:""}})]),a("div",{staticClass:"name"},[s._v(" Finished ")]),a("div",{staticClass:"date"})])])])]),a("div",{staticClass:"rainbow-panel part3"},[a("div",{staticClass:"title"},[s._v(" Details ")]),a("div",{staticClass:"part3-content"},[s._v(" "+s._s(s.proposal.desc)+" ")])])]),a("page-footer"),a("div",{directives:[{name:"show",rawName:"v-show",value:s.isShowMembers,expression:"isShowMembers"}],staticClass:"rainbow-dialog-box"},[a("div",{staticClass:"mask",on:{click:function(t){s.isShowMembers=!1}}}),a("div",{staticClass:"rainbow-dialog",on:{click:function(s){s.stopPropagation()}}},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"title"},[s._v(" All Members ")]),a("div",{staticClass:"address"},[s._v(" "+s._s(s.proposal.forVotes)+" ")])]),a("div",{staticClass:"vote-number"},[a("div",{staticClass:"number"},[s._v(" "+s._s(s.proposal.forVotes)+" ")]),s._m(4)]),a("div",{staticClass:"members"},s._l(s.proposal.receiptsArr,(function(t,e){return a("div",{key:e,staticClass:"member-item"},[s._m(5,!0),a("div",{staticClass:"name"},[s._v(" "+s._s(t.address)+" ")]),a("div",{staticClass:"number"},[s._v(" "+s._s(t.votes)+" ")])])})),0)])])],1)},i=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"number-line"},[e("div",{staticClass:"active-number"})])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:"",alt:""}})])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"number-line"},[e("div",{staticClass:"active-number"})])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:"",alt:""}})])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"number-line"},[e("div",{staticClass:"active-number"})])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:"",alt:""}})])}],r=e("5530"),o=(e("ac1f"),e("5319"),e("d3b7"),e("25f0"),e("2f62")),c={name:"proposalDetail",data:function(){return{proposal:{endBlock:0,supportArr:[],refuseArr:[],publicityDelay:0},isShowMembers:!1,statusIndex:0,myVotes:0,blockNumber:0}},computed:Object(r["a"])({},Object(o["b"])(["account","isConnected"])),watch:{isConnected:function(){this.getData()}},mounted:function(){var s=this;if(console.log(this.$route.params),this.proposal=this.$route.params.item,this.coinAddress=this.$store.state.daoManage.curDaoControlAddress.erc20Addr,this.proposal.receiptsArr=[],this.proposal.supportArr=[],this.proposal.refuseArr=[],this.proposal.receipts)for(var t in this.proposal.receipts)console.log(t),this.proposal.receipts[t]&&this.proposal.receipts[t].votes&&(this.proposal.receipts[t].votes=this.proposal.receipts[t].votes.replace(/,/g,"")/Math.pow(10,18),this.proposal.receiptsArr.push(Object(r["a"])({address:t},this.proposal.receipts[t])),this.proposal.receipts[t].support?this.proposal.supportArr.push(Object(r["a"])({address:t},this.proposal.receipts[t])):this.proposal.refuseArr.push(Object(r["a"])({address:t},this.proposal.receipts[t])));switch(this.proposal.state){case"Active":this.statusIndex=1}this.getData(),this.$eventBus.$on("message",(function(t){s.getData()}))},beforeDestroy:function(){this.$eventBus.$on("message",(function(){}))},methods:{delegate:function(){this.$store.dispatch("erc20/delegate",{address:this.account,coinAddress:this.coinAddress}).then((function(s){console.log(s)}))},getData:function(){var s=this;this.$store.dispatch("erc20/getPriorVotes",{blockNumber:parseInt(this.proposal.endBlock.toString().replace(",",""))-this.proposal.publicityDelay,coinAddress:this.coinAddress}),this.$store.dispatch("erc20/getCurrentVotes",this.$store.state.daoManage.curDaoControlAddress.erc20Addr).then((function(t){console.log(t),t&&(t=t.toString().replace(/,/g,""),s.myVotes=t)})),this.$store.dispatch("erc20/getBalance",this.$store.state.daoManage.curDaoControlAddress.erc20Addr).then((function(s){console.log(s)}))},castVote:function(s){this.$store.dispatch("daoProposal/castVote",{proposalAddress:this.$store.state.daoManage.curDaoControlAddress.proposalAddr,coinAddress:this.coinAddress,proposal_id:this.proposal.proposalId,support:s}).then((function(s){}))}}},n=c,l=(e("87b2"),e("2877")),d=Object(l["a"])(n,a,i,!1,null,"7e1c3682",null);t["default"]=d.exports},"87b2":function(s,t,e){"use strict";e("0b5e")},"9f6a0":function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAopJREFUeF7tmjuLFEEQgL/aWxCFk71FEAQTAw0MRNDERCP/gHgoaKAIgrkYaqy5yEVGHpx4gSaCiL/guEjBWDDxsaOICuqVtLfBsngzPduPme3pTae7dr6vq7rmJXT8Jx3nJwvIGdBxA7kEOp4AeRPMJZBLoOMGcgl0PAFyF0iqBL6qHvkN13pwdAve9WBjILJSluXJCChUzwP3FfZNAiusDEWu7yQhCQEGXmGtBPLEQGTjf8fnXkAVvIFWuDsUuZWcABv4MfT6ksi5pATUgDfcV5ZEHiYjoA68wIuByNlkNsE68MDrPiwvirxJQoBveCNlbrpACPi5ERAKfi4EhIS3EjBSvQpcBg4DawvwYK/I2xh3kaHhKwUUqqsKFyZhBT4CNwYij0NKiAFfKmCkehu4U9I+lkNJiAVfKuCz6iOBixW3kt4lxIR3FjAO4E1CbHinEpjaF5wlNAFfuQmOVF8BZ2w2O4GZJTQFXynADAgtoUl4KwEhJTQNby0ghIQ2wNcS4FNCW+BrC/AhoU3wMwlwkdA2+JkFzCLBzCl7dD3Vaiuf5Ni0ZpsxTg9E6rRIm5MZj4kG75QB/1ZUtVfAS9uLJQsJUeGdBYwl7CrguQcJ0eG9CDBBPqgu9uGpg4RG4L0JMIG+qA63YB04bZHqk0Mag/cqwAT7prr/17aEU5YSGoX3LsAE/KR6cAGeKJyskNA4fBABJmiheki3M+HYDhJaAR9MgAlsvtb4A6vA8SkJm324VPa6yrJ8vAxzuhCqOoP3qnt2w03AfL3xE3j2A+4dEPleNTfW8aACYkG4/E8W4GIvhbk5A1JYRReGnAEu9lKYmzMghVV0YcgZ4GIvhbk5A1JYRReGzmfAX1ayPVAaIhhnAAAAAElFTkSuQmCC"},b64b:function(s,t,e){var a=e("23e7"),i=e("7b0b"),r=e("df75"),o=e("d039"),c=o((function(){r(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(s){return r(i(s))}})},dbb4:function(s,t,e){var a=e("23e7"),i=e("83ab"),r=e("56ef"),o=e("fc6a"),c=e("06cf"),n=e("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(s){var t,e,a=o(s),i=c.f,l=r(a),d={},p=0;while(l.length>p)e=i(a,t=l[p++]),void 0!==e&&n(d,t,e);return d}})},e439:function(s,t,e){var a=e("23e7"),i=e("d039"),r=e("fc6a"),o=e("06cf").f,c=e("83ab"),n=i((function(){o(1)})),l=!c||n;a({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(s,t){return o(r(s),t)}})}}]);
//# sourceMappingURL=chunk-60cba822.e0d29e4f.js.map